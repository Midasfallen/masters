# API Testing Scripts

## test-api.ts

–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Backend –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω:**
   ```bash
   cd backend
   npm run start:dev
   ```

2. **Docker —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:**
   ```bash
   docker-compose up -d
   ```

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞:**
   ```bash
   npm run seed
   ```

### –ó–∞–ø—É—Å–∫

**–í–∞–∂–Ω–æ:** –ö–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend`:

```bash
cd backend
npm run test:api
```

**–ù–ï –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞!**

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

#### –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /` - API –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `GET /health` - Health check
- `GET /categories/tree` - –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `GET /categories/roots` - –ö–æ—Ä–Ω–µ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `GET /services` - –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥
- `GET /reviews` - –°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤
- `GET /search/masters` - –ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–æ–≤
- `GET /search/services` - –ü–æ–∏—Å–∫ —É—Å–ª—É–≥

#### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏):
- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` - –õ–æ–≥–∏–Ω
- `GET /auth/me` - –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- `GET /users/me` - –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /users/me/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /posts/feed` - –õ–µ–Ω—Ç–∞ –ø–æ—Å—Ç–æ–≤
- `POST /posts` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
- `GET /posts/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–∞
- `POST /posts/:id/like` - –õ–∞–π–∫ –ø–æ—Å—Ç–∞
- `DELETE /posts/:id/unlike` - –£–±—Ä–∞—Ç—å –ª–∞–π–∫
- `GET /subscriptions/following` - –ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- `GET /subscriptions/followers` - –ú–æ–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏
- `GET /favorites` - –°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- `GET /friendships` - –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
- `GET /comments` - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É
- `GET /notifications` - –°–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `GET /notifications/unread-count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–°–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç:
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–æ–∫
- ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
- üìä –ò—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üöÄ –ù–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

üìç Base URL: http://localhost:3000/api/v2

‚úÖ GET / - API info (45ms)
‚úÖ GET /health - health check (23ms)
‚úÖ Setup test user (156ms)

üìã Auth Endpoints:
‚úÖ POST /auth/register - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (234ms)
‚úÖ POST /auth/login - –ª–æ–≥–∏–Ω (189ms)
‚úÖ GET /auth/me - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (67ms)

...

============================================================
üìä –ò–¢–û–ì–ò –ü–†–û–í–ï–†–ö–ò API
============================================================
‚úÖ –£—Å–ø–µ—à–Ω–æ: 25
‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 0
‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ: 2
üìä –í—Å–µ–≥–æ: 27

‚è±Ô∏è  –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 145ms
```

### –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω:**
   ```bash
   curl http://localhost:3000/api/v2/health
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞:**
   ```bash
   npm run start:dev
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   docker-compose ps
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   npm run seed
   ```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –¢–µ—Å—Ç—ã –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π)
- –°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
