# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —É—Å–ª—É–≥

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 5 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä—ë–º –≤—ã–ø–æ–ª–Ω–µ–Ω)  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è  
**–ü–æ–¥—Ö–æ–¥:** –ß–∏—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–æ–ª–≥

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
- **–¢–∞–±–ª–∏—Ü–∞ `categories`**: –°–º–µ—à–∞–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (level 0, 1) –∏ —à–∞–±–ª–æ–Ω—ã —É—Å–ª—É–≥ (level 2)
  - Level 0: 10 –∫–æ—Ä–Ω–µ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ö—Ä–∞—Å–æ—Ç–∞ –∏ —É—Ö–æ–¥")
  - Level 1: 53 –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏")
  - Level 2: 340+ —à–∞–±–ª–æ–Ω–æ–≤ —É—Å–ª—É–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞") ‚Äî **–ü–†–û–ë–õ–ï–ú–ê**
- **–¢–∞–±–ª–∏—Ü–∞ `services`**: 80 —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥ –º–∞—Å—Ç–µ—Ä–æ–≤
  - –°–≤—è–∑–∞–Ω—ã —Å `category_id` (level 2 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
  - –°–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: —Ü–µ–Ω–∞, –º–∞—Å—Ç–µ—Ä, –æ–ø–∏—Å–∞–Ω–∏–µ

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ö–∞—Ç–µ–≥–æ—Ä–∏–π level 0: 10
- –ö–∞—Ç–µ–≥–æ—Ä–∏–π level 1: 53
- –ö–∞—Ç–µ–≥–æ—Ä–∏–π level 2: 340+ (–∏–∑ –Ω–∏—Ö —Ç–æ–ª—å–∫–æ 22 –∏–º–µ—é—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ services)
- –†–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥ (services): 80
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (bookings): 48 (–∏—Å–ø–æ–ª—å–∑—É—é—Ç services)
- –ü–æ—Å—Ç–æ–≤ —Å —É—Å–ª—É–≥–∞–º–∏: 20 (—á–µ—Ä–µ–∑ post_services)

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ù–∞—Ä—É—à–µ–Ω–∏–µ Single Source of Truth**
   - –£—Å–ª—É–≥–∞ "–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞" —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤ `categories` (level 2), –∏ –≤ `services` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã)
   - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ –≤ `categories`, –¥–∞–Ω–Ω—ã–µ –≤ `services` –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è

2. **–°–º–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π**
   - `categories.level = 2` ‚Äî —ç—Ç–æ –Ω–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞ —à–∞–±–ª–æ–Ω—ã —É—Å–ª—É–≥
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –∞ –Ω–µ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π

3. **–ü—Ä–æ–±–ª–µ–º—ã –ø–æ–∏—Å–∫–∞**
   - –ü–æ–∏—Å–∫ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ `master_profiles` –∏ —à–∞–±–ª–æ–Ω–∞–º —É—Å–ª—É–≥ (level 2)
   - –°–µ–π—á–∞—Å –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ —Ç–∞–±–ª–∏—Ü–µ `services`, –∏–≥–Ω–æ—Ä–∏—Ä—É—è —à–∞–±–ª–æ–Ω—ã

4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
   - –ù–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `categories` (level 2) –∏ –≤ `services.name`
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–æ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

5. **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**
   - –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–±–µ–∑ —É—Å–ª—É–≥), –Ω—É–∂–Ω–æ –≤–µ–∑–¥–µ –¥–æ–±–∞–≤–ª—è—Ç—å `WHERE level < 2`
   - –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤–∫–ª—é—á–∞–µ—Ç "—É—Å–ª—É–≥–∏", —á—Ç–æ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –Ω–µ–≤–µ—Ä–Ω–æ

---

## ‚úÖ –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
categories (—Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
‚îú‚îÄ‚îÄ Level 0: –ö–æ—Ä–Ω–µ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (10)
‚îÇ   ‚îî‚îÄ‚îÄ Level 1: –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (53)
‚îÇ       ‚îî‚îÄ‚îÄ (–ù–ï–¢ level 2!)

service_templates (—à–∞–±–ª–æ–Ω—ã —É—Å–ª—É–≥)
‚îú‚îÄ‚îÄ –°–≤—è–∑–∞–Ω—ã —Å category_id (level 1)
‚îú‚îÄ‚îÄ –°–æ–¥–µ—Ä–∂–∞—Ç: name, description, icon, default_duration_range
‚îî‚îÄ‚îÄ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ services

services (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–æ–≤)
‚îú‚îÄ‚îÄ –°–≤—è–∑–∞–Ω—ã —Å service_template_id (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ –°–≤—è–∑–∞–Ω—ã —Å category_id (level 1) –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ –°–æ–¥–µ—Ä–∂–∞—Ç: name, price, duration, master_id, description
‚îî‚îÄ‚îÄ –ú–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –±–µ–∑ —à–∞–±–ª–æ–Ω–∞ (custom_service_name)
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
   - `categories` ‚Äî —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
   - `service_templates` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —à–∞–±–ª–æ–Ω–æ–≤ —É—Å–ª—É–≥
   - `services` ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–æ–≤

2. **Single Source of Truth**
   - –®–∞–±–ª–æ–Ω —É—Å–ª—É–≥–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (`service_templates`)
   - –ú–∞—Å—Ç–µ—Ä–∞ —Å–æ–∑–¥–∞—é—Ç —É—Å–ª—É–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–æ–≤ –∏–ª–∏ —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ

3. **–ì–∏–±–∫–æ—Å—Ç—å**
   - –ú–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ –∏–ª–∏ —Å–≤–æ—é —É–Ω–∏–∫–∞–ª—å–Ω—É—é
   - –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —à–∞–±–ª–æ–Ω–∞–º –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å–ª—É–≥–∞–º

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ª–µ–≥—á–µ (–Ω–µ—Ç level 2)
   - –ü–æ–∏—Å–∫ –ø–æ —à–∞–±–ª–æ–Ω–∞–º –±—ã—Å—Ç—Ä–µ–µ (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)

---

## üìã –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –≠—Ç–∞–ø 1: –†–∞–¥–∏–∫–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –±–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π

**–î–µ–π—Å—Ç–≤–∏—è:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `service_templates` (—á–∏—Å—Ç–∞—è —Å—Ö–µ–º–∞)**
   ```sql
   CREATE TABLE service_templates (
     id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
     category_id UUID NOT NULL REFERENCES categories(id) ON DELETE CASCADE,
     slug VARCHAR(255) NOT NULL UNIQUE,  -- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è SEO –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
     name VARCHAR(255) NOT NULL,
     description TEXT,
     icon_url TEXT,
     default_duration_minutes INTEGER,
     default_price_range_min NUMERIC(10,2),
     default_price_range_max NUMERIC(10,2),
     is_active BOOLEAN DEFAULT true,
     display_order INTEGER DEFAULT 0,
     created_at TIMESTAMP DEFAULT NOW(),
     updated_at TIMESTAMP DEFAULT NOW(),
     CONSTRAINT fk_service_templates_category 
       FOREIGN KEY (category_id) REFERENCES categories(id)
   );

   CREATE INDEX idx_service_templates_category ON service_templates(category_id);
   CREATE INDEX idx_service_templates_active ON service_templates(is_active);
   CREATE INDEX idx_service_templates_slug ON service_templates(slug);
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤**
   ```sql
   CREATE TABLE service_template_translations (
     id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
     service_template_id UUID NOT NULL REFERENCES service_templates(id) ON DELETE CASCADE,
     language VARCHAR(10) NOT NULL,
     name VARCHAR(255) NOT NULL,
     description TEXT,
     keywords TEXT[],  -- –ú–∞—Å—Å–∏–≤ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
     created_at TIMESTAMP DEFAULT NOW(),
     CONSTRAINT uq_service_template_translation 
       UNIQUE (service_template_id, language)
   );
   ```
   
   **‚ö†Ô∏è –í–ê–ñ–ù–û: –û–±—Ä–∞–±–æ—Ç–∫–∞ keywords –¥–ª—è Meilisearch**
   ```typescript
   // –ü—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤ Meilisearch –ø—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –º–∞—Å—Å–∏–≤ keywords –≤ —Å—Ç—Ä–æ–∫—É
   // –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –¥–≤–∏–∂–∫–∏ –ª—É—á—à–µ —Ä–∞–Ω–∂–∏—Ä—É—é—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏, —á–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã
   const document = {
     id: template.id,
     name: translation.name,
     description: translation.description,
     // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –º–∞—Å—Å–∏–≤ keywords –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
     keywords_text: translation.keywords?.join(' ') || '',
     keywords: translation.keywords || [], // –û—Å—Ç–∞–≤–ª—è–µ–º –∏ –º–∞—Å—Å–∏–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
     // ...
   };
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `services`**
   ```sql
   -- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É service_template_id (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —É—Å–ª—É–≥)
   ALTER TABLE services 
   ADD COLUMN service_template_id UUID 
   REFERENCES service_templates(id);

   -- –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   CREATE INDEX idx_services_template ON services(service_template_id);

   -- –í–ê–ñ–ù–û: category_id —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   -- –≠—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ CHECK constraint 
   -- –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —á–µ—Ä–µ–∑ JOIN
   ```

4. **–£–¥–∞–ª–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π level 2 (–µ—Å–ª–∏ –±—ã–ª–∏)**
   ```sql
   -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ CHECK constraints –Ω–∞ level
   -- –ï—Å–ª–∏ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–µ—â–∞—é—Ç level > 1, –∏—Ö –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
   -- –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ: CHECK (level IN (0, 1))
   ```

### –≠—Ç–∞–ø 2: –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Å–∏–¥–æ–≤

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î —á–µ—Ä–µ–∑ —Å–∏–¥—ã

**‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ keywords —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–µ "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω—é–∞–Ω—Å—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"**

**–î–µ–π—Å—Ç–≤–∏—è:**

1. **–û—á–∏—Å—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö**
   ```typescript
   // –í seed-catalog.ts –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ
   // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º categories –∏ services
   await categoryRepository.delete({});
   await serviceRepository.delete({});
   // –ò–ª–∏ —á–µ—Ä–µ–∑ TRUNCATE –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—á–∏—Å—Ç–∫–∏
   ```

2. **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ `seed-catalog.ts`**
   
   **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
   ```typescript
   // 1. –°–æ–∑–¥–∞–Ω–∏–µ level 0 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–∫–æ—Ä–Ω–µ–≤—ã–µ)
   for (const rootCat of CATALOG_DATA) {
     const rootCategory = categoryRepository.create({
       slug: generateSlug(rootCat.name),
       level: 0,
       // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
     });
     const savedRoot = await categoryRepository.save(rootCategory);
     
     // 2. –°–æ–∑–¥–∞–Ω–∏–µ level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
     for (const subCat of rootCat.subcategories) {
       const subCategory = categoryRepository.create({
         slug: `${generateSlug(rootCat.name)}-${generateSlug(subCat.name)}`,
         level: 1,
         parent: savedRoot,
         // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
       });
       const savedSub = await categoryRepository.save(subCategory);
       
       // 3. –°–æ–∑–¥–∞–Ω–∏–µ service_templates (–≤–º–µ—Å—Ç–æ level 2 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
       for (const serviceName of subCat.services) {
         const template = serviceTemplateRepository.create({
           category_id: savedSub.id,
           slug: `${generateSlug(rootCat.name)}-${generateSlug(subCat.name)}-${generateSlug(serviceName)}`,
           name: serviceName,
           // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∏–∑ —à–∞–±–ª–æ–Ω–∞
         });
         await serviceTemplateRepository.save(template);
       }
     }
   }
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `seed.ts`**
   
   **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
   ```typescript
   // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥ –º–∞—Å—Ç–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å service_template_id
   const templates = await serviceTemplateRepository.find({
     where: { category_id: In(masterProfile.category_ids) }
   });
   
   // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —à–∞–±–ª–æ–Ω
   const template = faker.helpers.arrayElement(templates);
   
   const service = serviceRepository.create({
     master_id: masterProfile.id,
     category_id: template.category_id,  // Level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏—è
     service_template_id: template.id,     // –°—Å—ã–ª–∫–∞ –Ω–∞ —à–∞–±–ª–æ–Ω
     name: template.name,                 // –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
     price: faker.number.int({ min: 500, max: 5000 }),
     duration_minutes: template.default_duration_minutes || 60,
     // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
   });
   ```

4. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–∑–∞–º–µ–Ω–∞ –≤–º–µ—Å—Ç–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)

**–¶–µ–ª—å:** –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–µ "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω—é–∞–Ω—Å—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API:**

1. **Categories API**

   **`GET /categories/tree`**
   - **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ë–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `children` –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ level 1
   - **–ë—ã–ª–æ:** Level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–¥–µ—Ä–∂–∞–ª–∏ –º–∞—Å—Å–∏–≤ `children` —Å level 2
   - **–°—Ç–∞–ª–æ:** Level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç `children`
   ```typescript
   // –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (—É–±—Ä–∞—Ç—å)
   {
     id: "...",
     level: 1,
     children: [...] // level 2 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ - –£–î–ê–õ–ò–¢–¨
   }
   
   // –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
   {
     id: "...",
     level: 1
     // children –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   }
   ```

   **`GET /categories/:id`**
   - –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ level 0 –∏ level 1

2. **Service Templates API (–Ω–æ–≤—ã–π –º–æ–¥—É–ª—å)**

   **`GET /categories/:id/templates`**
   - **–ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ —É—Å–ª—É–≥ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ level 1
   - **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
     - `id` ‚Äî ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ level 1
     - `language` (query, optional) ‚Äî —è–∑—ã–∫ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (default: 'ru')
   - **–û—Ç–≤–µ—Ç:**
     ```typescript
     {
       data: ServiceTemplateResponseDto[],
       total: number
     }
     ```

   **`GET /service-templates/:slug`**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –ø–æ slug
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è SEO –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

3. **Services API**

   **`POST /services` (—Å–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏)**
   - **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** `category_id` —Ç–µ–ø–µ—Ä—å —Å—Ç—Ä–æ–≥–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ level 1
   - **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–º–µ–µ—Ç `level = 1`
   - **–ù–æ–≤–æ–µ –ø–æ–ª–µ:** `service_template_id` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
   - **–õ–æ–≥–∏–∫–∞:**
     ```typescript
     // –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω service_template_id, –∫–æ–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —à–∞–±–ª–æ–Ω–∞
     if (createDto.service_template_id) {
       const template = await serviceTemplateRepository.findOne({
         where: { id: createDto.service_template_id }
       });
       
       if (!template) {
         throw new NotFoundException('–®–∞–±–ª–æ–Ω —É—Å–ª—É–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω');
       }
       
       // ‚ö†Ô∏è –í–ê–ñ–ù–û: –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
       // category_id –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å category_id —à–∞–±–ª–æ–Ω–∞
       if (createDto.category_id && createDto.category_id !== template.category_id) {
         throw new BadRequestException(
           'category_id —É—Å–ª—É–≥–∏ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å category_id —à–∞–±–ª–æ–Ω–∞'
         );
       }
       
       // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Override) —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏:
       // 1. –ï—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –∑–∞–ø–æ–ª–Ω–∏–ª –ø–æ–ª–µ —Å–∞–º ‚Äî –±–µ—Ä–µ–º –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ
       // 2. –ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ ‚Äî –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∏–∑ —à–∞–±–ª–æ–Ω–∞ (fallback)
       service.name = createDto.name || template.name;
       service.description = createDto.description || template.description || null;
       service.category_id = template.category_id; // –í—Å–µ–≥–¥–∞ –±–µ—Ä–µ–º –∏–∑ —à–∞–±–ª–æ–Ω–∞
       service.duration_minutes = createDto.duration_minutes || template.default_duration_minutes || 60;
       service.service_template_id = template.id;
     } else {
       // –ö–∞—Å—Ç–æ–º–Ω–∞—è —É—Å–ª—É–≥–∞ –±–µ–∑ —à–∞–±–ª–æ–Ω–∞
       // –í–∞–ª–∏–¥–∞—Ü–∏—è: category_id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å level 1
       const category = await categoryRepository.findOne({
         where: { id: createDto.category_id }
       });
       if (!category || category.level !== 1) {
         throw new BadRequestException('category_id –¥–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é level 1');
       }
       service.category_id = createDto.category_id;
       service.service_template_id = null;
     }
     ```

   **`GET /services`**
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `category_id` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å level 1
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `service_template_id`

4. **Search API**

   **`GET /search/masters`**
   - –ü–æ–∏—Å–∫ –ø–æ `master_profiles.category_ids` (level 0, 1)
   - –ü–æ–∏—Å–∫ –ø–æ `services` –º–∞—Å—Ç–µ—Ä–∞

   **`GET /search/services`**
   - –ü–æ–∏—Å–∫ –ø–æ `service_templates` (—à–∞–±–ª–æ–Ω—ã) ‚Äî **–Ω–æ–≤–æ–µ**
   - –ü–æ–∏—Å–∫ –ø–æ `services` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏)
   - –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å Meilisearch –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥—É–ª—è—Ö:**

1. **`categories` –º–æ–¥—É–ª—å**
   - –£–¥–∞–ª–∏—Ç—å –≤—Å—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å `level = 2`
   - `getTree()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ level 0 –∏ level 1 (–±–µ–∑ children –¥–ª—è level 1)
   - –£–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å level 2

2. **`service-templates` –º–æ–¥—É–ª—å (–Ω–æ–≤—ã–π)**
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏
   - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
   - –ú–µ—Ç–æ–¥ `getByCategoryId(categoryId)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –ú–µ—Ç–æ–¥ `getBySlug(slug)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ slug

3. **`services` –º–æ–¥—É–ª—å**
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É `service_template_id`
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: `category_id` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å level 1
   - **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏ —Å —à–∞–±–ª–æ–Ω–æ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ `category_id` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `template.category_id`
   - **–õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback-—Å–∏—Å—Ç–µ–º—É (—Å–º. "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω—é–∞–Ω—Å—ã")
   - –û–±–Ω–æ–≤–∏—Ç—å DTO: –¥–æ–±–∞–≤–∏—Ç—å `serviceTemplateId?: string`

4. **`search` –º–æ–¥—É–ª—å**
   - –ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–æ–≤: –ø–æ `master_profiles.category_ids` (level 0, 1) –∏ –ø–æ `services`
   - –ü–æ–∏—Å–∫ —É—Å–ª—É–≥: –ø–æ `service_templates` (—à–∞–±–ª–æ–Ω—ã) –∏ –ø–æ `services` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ)
   - –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å Meilisearch –¥–ª—è `service_templates`
   - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤
   
   **‚ö†Ô∏è –í–ê–ñ–ù–û: –û—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ Meilisearch –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ**
   ```typescript
   // –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏–Ω–¥–µ–∫—Å–æ–≤
   // –≠—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π level 2 –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞
   async onModuleInit() {
     try {
       // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã
       await this.meiliClient.deleteIndex('masters');
       await this.meiliClient.deleteIndex('services');
       
       // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã
       await this.createMastersIndex();
       await this.createServicesIndex();
       await this.createServiceTemplatesIndex(); // –ù–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
       
       // –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
       await this.reindexAll();
     } catch (error) {
       console.error('Error resetting Meilisearch indices:', error);
     }
   }
   ```

5. **`masters` –º–æ–¥—É–ª—å**
   - `category_ids` –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ level 0 –∏ level 1
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getAvailableTemplates(masterId)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏: –ø—Ä–æ–≤–µ—Ä—è—Ç—å —É—Ä–æ–≤–µ–Ω—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π

6. **`posts` –º–æ–¥—É–ª—å**
   - `category_ids` –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ level 0 –∏ level 1
   - –°–≤—è–∑—å —Å —É—Å–ª—É–≥–∞–º–∏ —á–µ—Ä–µ–∑ `post_services` –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

**–¶–µ–ª—å:** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–ö–∞—Ç–∞–ª–æ–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ level 0 –∏ level 1
   - –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ level 1 –≤—ã–∑—ã–≤–∞—Ç—å `GET /categories/:id/templates`
   - –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ —É—Å–ª—É–≥ –≤–º–µ—Å—Ç–æ level 2 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —à–∞–±–ª–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —ç—Ç—É —É—Å–ª—É–≥—É
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `slug` —à–∞–±–ª–æ–Ω–∞ –¥–ª—è URL (SEO-friendly)

2. **–ü–æ–∏—Å–∫**
   - –ü–æ–∏—Å–∫ –ø–æ —à–∞–±–ª–æ–Ω–∞–º —É—Å–ª—É–≥ (`service_templates`) ‚Äî **–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
   - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å–ª—É–≥–∞–º (`services`)
   - –ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (level 0, 1) –∏ —É—Å–ª—É–≥–∞–º
   - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —É—Å–ª—É–≥

3. **–°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–æ–º (—Ñ–æ—Ä–º–∞)**
   
   **–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
   ```
   1. –ú–∞—Å—Ç–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é (level 1)
   2. –ü–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è —à–∞–±–ª–æ–Ω—ã —É—Å–ª—É–≥ —á–µ—Ä–µ–∑ GET /categories/:id/templates
   3. –ú–∞—Å—Ç–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ—é —É—Å–ª—É–≥—É
   4. –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —à–∞–±–ª–æ–Ω:
      - –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ: name, description, default_duration_minutes
      - –ú–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—è
      - service_template_id –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å
   5. –ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è —É—Å–ª—É–≥–∞:
      - service_template_id = null
      - –ú–∞—Å—Ç–µ—Ä –∑–∞–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –ø–æ–ª—è –≤—Ä—É—á–Ω—É—é
   ```

   **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
   - `ServiceCreationForm` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞
   - `ServiceTemplateSelector` ‚Äî –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞
   - `CategorySelector` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ —Å level 0, 1

4. **–≠–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞**
   - –û–±–Ω–æ–≤–∏—Ç—å `CategoryServicesScreen` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏
   - –û–±–Ω–æ–≤–∏—Ç—å `ServiceMastersScreen` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å slug —à–∞–±–ª–æ–Ω–æ–≤ –≤ URL

5. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**
   - –î–æ–±–∞–≤–∏—Ç—å `ServiceTemplateModel` (–Ω–æ–≤—ã–π)
   - –û–±–Ω–æ–≤–∏—Ç—å `ServiceModel` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `serviceTemplateId`
   - –û–±–Ω–æ–≤–∏—Ç—å `CategoryTreeModel` ‚Äî —É–±—Ä–∞—Ç—å children –¥–ª—è level 1

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω—é–∞–Ω—Å—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ (`POST /services` —Å `service_template_id`) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

```typescript
// service.category_id –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å service_template.category_id
if (createDto.category_id && createDto.category_id !== template.category_id) {
  throw new BadRequestException(
    'category_id —É—Å–ª—É–≥–∏ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å category_id —à–∞–±–ª–æ–Ω–∞'
  );
}
```

**–ó–∞—á–µ–º:** –≠—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ —É—Å–ª—É–≥–∞ ¬´–°—Ç—Ä–∏–∂–∫–∞¬ª —Å–ª—É—á–∞–π–Ω–æ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´–ú–∞–Ω–∏–∫—é—Ä¬ª –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

#### 2. –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–µ–π (Override)

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ —è–≤–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:

```typescript
// –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ï—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –∑–∞–ø–æ–ª–Ω–∏–ª –ø–æ–ª–µ —Å–∞–º ‚Äî –±–µ—Ä–µ–º –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ
// –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ ‚Äî –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∏–∑ —à–∞–±–ª–æ–Ω–∞ (fallback)
service.name = createDto.name || template.name;
service.description = createDto.description || template.description || null;
service.duration_minutes = createDto.duration_minutes || template.default_duration_minutes || 60;
```

**–ó–∞—á–µ–º:** –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —à–∞–±–ª–æ–Ω–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ ¬´fallback-—Å–∏—Å—Ç–µ–º–∞¬ª –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –ø—Ä–∏ —ç—Ç–æ–º –¥–∞–≤–∞—è –º–∞—Å—Ç–µ—Ä—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—é–±–æ–µ –ø–æ–ª–µ.

#### 3. –û—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ Meilisearch –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∏–Ω–¥–µ–∫—Å–æ–≤:

```typescript
async onModuleInit() {
  try {
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã (–≤–∫–ª—é—á–∞—è –¥–∞–Ω–Ω—ã–µ —Å level 2 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏)
    await this.meiliClient.deleteIndex('masters');
    await this.meiliClient.deleteIndex('services');
    
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã
    await this.createMastersIndex();
    await this.createServicesIndex();
    await this.createServiceTemplatesIndex(); // –ù–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
    
    // –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
    await this.reindexAll();
  } catch (error) {
    console.error('Error resetting Meilisearch indices:', error);
  }
}
```

**–ó–∞—á–µ–º:** –ß—Ç–æ–±—ã —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π level 2 –Ω–µ –≤—Å–ø–ª—ã–≤–∞–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞.

#### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ keywords –≤ service_template_translations

–ï—Å–ª–∏ –ø–æ–ª–µ `keywords TEXT[]` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ Meilisearch, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏–¥-—Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–∞—Å—Å–∏–≤ –≤ —Å—Ç—Ä–æ–∫—É:

```typescript
// –ü—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤ Meilisearch –ø—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –º–∞—Å—Å–∏–≤ keywords –≤ —Å—Ç—Ä–æ–∫—É
const document = {
  id: template.id,
  name: translation.name,
  description: translation.description,
  // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –º–∞—Å—Å–∏–≤ keywords –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
  keywords_text: translation.keywords?.join(' ') || '',
  keywords: translation.keywords || [], // –û—Å—Ç–∞–≤–ª—è–µ–º –∏ –º–∞—Å—Å–∏–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
};
```

**–ó–∞—á–µ–º:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –¥–≤–∏–∂–∫–∏ –ª—É—á—à–µ —Ä–∞–Ω–∂–∏—Ä—É—é—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏, —á–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã.

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

#### `service_templates` (—á–∏—Å—Ç–∞—è —Å—Ö–µ–º–∞)
```sql
CREATE TABLE service_templates (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  category_id UUID NOT NULL REFERENCES categories(id) ON DELETE CASCADE,
  slug VARCHAR(255) NOT NULL UNIQUE,  -- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è SEO
  name VARCHAR(255) NOT NULL,
  description TEXT,
  icon_url TEXT,
  default_duration_minutes INTEGER,
  default_price_range_min NUMERIC(10,2),
  default_price_range_max NUMERIC(10,2),
  is_active BOOLEAN DEFAULT true,
  display_order INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_service_templates_category ON service_templates(category_id);
CREATE INDEX idx_service_templates_active ON service_templates(is_active);
CREATE INDEX idx_service_templates_slug ON service_templates(slug);
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è `services`
```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É service_template_id (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é)
ALTER TABLE services 
ADD COLUMN service_template_id UUID 
REFERENCES service_templates(id);

CREATE INDEX idx_services_template ON services(service_template_id);

-- category_id —Ç–µ–ø–µ—Ä—å —Å—Ç—Ä–æ–≥–æ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏—é
-- service_template_id - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —à–∞–±–ª–æ–Ω (NULL –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —É—Å–ª—É–≥)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏

```
categories (level 0, 1)
  ‚îî‚îÄ‚îÄ service_templates (—à–∞–±–ª–æ–Ω—ã)
       ‚îî‚îÄ‚îÄ services (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–æ–≤)
            ‚îú‚îÄ‚îÄ master_id ‚Üí master_profiles
            ‚îú‚îÄ‚îÄ category_id ‚Üí categories (level 1)
            ‚îî‚îÄ‚îÄ service_template_id ‚Üí service_templates (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ DTO

**CategoryTreeResponseDto:**
```typescript
// –£–±—Ä–∞—Ç—å children –¥–ª—è level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
{
  id: string;
  slug: string;
  level: 0 | 1;  // –¢–æ–ª—å–∫–æ 0 –∏ 1
  name: string;
  iconUrl?: string;
  color?: string;
  displayOrder: number;
  mastersCount: number;
  isPopular: boolean;
  // children –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–ª—è level 1
}
```

**ServiceTemplateResponseDto (–Ω–æ–≤—ã–π):**
```typescript
{
  id: string;
  categoryId: string;  // Level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏—è
  slug: string;        // SEO-friendly URL
  name: string;
  description?: string;
  iconUrl?: string;
  defaultDurationMinutes?: number;
  defaultPriceRangeMin?: number;
  defaultPriceRangeMax?: number;
  isActive: boolean;
  displayOrder: number;
}
```

**ServiceResponseDto:**
```typescript
{
  id: string;
  masterId: string;
  categoryId: string;           // Level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  serviceTemplateId?: string;   // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —à–∞–±–ª–æ–Ω
  name: string;
  description?: string;
  price: number;
  durationMinutes: number;
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ü–æ—Ç–µ—Ä—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –≠—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –Ω–µ –ø—Ä–æ–¥–∞–∫—à–Ω ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Å–∏–¥—ã
- –°–∏–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏ (–º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ)
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –†–∏—Å–∫ 2: –ù–∞—Ä—É—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –û–±–Ω–æ–≤–ª—è—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –±—ç–∫–µ–Ω–¥–æ–º
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å feature flags –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

### –†–∏—Å–∫ 3: –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–∏—Å–∫–æ–º
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å Meilisearch –¥–ª—è `service_templates`
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

### –†–∏—Å–∫ 4: –û—à–∏–±–∫–∏ –≤ —Å–∏–¥–∞—Ö
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è:

1. ‚úÖ –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ level 0 –∏ level 1 (–±–µ–∑ children –¥–ª—è level 1)
2. ‚úÖ –í—Å–µ —à–∞–±–ª–æ–Ω—ã —É—Å–ª—É–≥ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `service_templates` (—Å–æ slug)
3. ‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —à–∞–±–ª–æ–Ω–∞–º (`service_templates`) –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å–ª—É–≥–∞–º (`services`)
4. ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É `categories` –∏ `services`
5. ‚úÖ API –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–∑–∞–º–µ–Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤)
6. ‚úÖ –°–∏–¥—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞–ø–æ–ª–Ω—è—é—Ç –ø—É—Å—Ç—É—é –ë–î
7. ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

---

## üóìÔ∏è –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–π timeline

1. **–≠—Ç–∞–ø 1 (–°—Ö–µ–º–∞ –ë–î):** 1 –¥–µ–Ω—å
2. **–≠—Ç–∞–ø 2 (–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Å–∏–¥–æ–≤):** 2-3 –¥–Ω—è
3. **–≠—Ç–∞–ø 3 (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API):** 3-4 –¥–Ω—è
4. **–≠—Ç–∞–ø 4 (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞):** 3-4 –¥–Ω—è

**–ò—Ç–æ–≥–æ:** 9-12 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:**
- –ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö SQL-–º–∏–≥—Ä–∞—Ü–∏–π
- –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞
- –ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

---

## üìù –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã (—Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç—ã)

1. **–ù—É–∂–Ω–∞ –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ `service_templates`?**
   - ‚úÖ **–î–∞, –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞** ‚Äî —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

2. **–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —É—Å–ª—É–≥–∏ –º–∞—Å—Ç–µ—Ä–æ–≤?**
   - ‚úÖ **`service_template_id = NULL`** –≤ `services`
   - –ú–∞—Å—Ç–µ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥—É –±–µ–∑ —à–∞–±–ª–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ú–∞—Å—Å–∞–∂ —É—à–µ–π —Ä–æ–∑–æ–≤—ã–º –º–∞—Å–ª–æ–º")
   - –£—Å–ª—É–≥–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ level 1

3. **–ù—É–∂–Ω–∞ –ª–∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å?**
   - ‚úÖ **–ù–µ—Ç** ‚Äî —ç—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –Ω–µ –ø—Ä–æ–¥–∞–∫—à–Ω
   - –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ level 2 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —á–µ—Ä–µ–∑ —Å–∏–¥—ã
   - –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∏–¥—ã

4. **–ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ–∏—Å–∫?**
   - ‚úÖ **–ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–æ–≤:** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (level 0, 1) + –ø–æ —É—Å–ª—É–≥–∞–º
   - ‚úÖ **–ü–æ–∏—Å–∫ —É—Å–ª—É–≥:** –ø–æ —à–∞–±–ª–æ–Ω–∞–º (`service_templates`) + –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å–ª—É–≥–∞–º (`services`)
   - –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å Meilisearch –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤

5. **–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ `master_profiles.category_ids`?**
   - ‚úÖ **–í —Å–∏–¥–∞—Ö –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π –º–∞—Å—Ç–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ level 0 –∏ level 1
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API: –ø—Ä–æ–≤–µ—Ä—è—Ç—å —É—Ä–æ–≤–µ–Ω—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `docs/business/Catalog.md` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
- `docs/architecture/ARCHITECTURE.md` ‚Äî –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `backend/src/database/seeds/seed-catalog.ts` ‚Äî —Å–∏–¥—ã –∫–∞—Ç–∞–ª–æ–≥–∞
- `backend/src/modules/categories/` ‚Äî –º–æ–¥—É–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `backend/src/modules/services/` ‚Äî –º–æ–¥—É–ª—å —É—Å–ª—É–≥
- `backend/src/modules/search/` ‚Äî –º–æ–¥—É–ª—å –ø–æ–∏—Å–∫–∞

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è "–ß–∏—Å—Ç–æ–π" —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –°—Ö–µ–º–∞ –ë–î
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `service_templates` —Å –ø–æ–ª–µ–º `slug` (UNIQUE)
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `service_template_translations`
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `service_template_id` –≤ `services` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è)
- [x] –°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [x] –õ–æ–≥–∏–∫–∞ API/–¥–µ—Ä–µ–≤–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç level 2 (—Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π level 2 ‚Äî —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏–¥–æ–≤)

### –≠—Ç–∞–ø 2: –°–∏–¥—ã
- [x] –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `seed-catalog.ts`:
  - [x] –°–æ–∑–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ level 0 –∏ level 1 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - [x] –°–æ–∑–¥–∞–µ—Ç `service_templates` –≤–º–µ—Å—Ç–æ level 2 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  - [x] –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `slug` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- [x] –û–±–Ω–æ–≤–ª–µ–Ω `seed.ts`:
  - [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `service_template_id` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ª—É–≥
  - [x] `master_profiles.category_ids` —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ level 0 –∏ level 1
- [x] –°–∏–¥—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞–ø–æ–ª–Ω—è—é—Ç –ë–î (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ: `npm run seed:catalog`, –∑–∞—Ç–µ–º `npm run seed` ‚Äî 10 root, 53 L1, 340 —à–∞–±–ª–æ–Ω–æ–≤, 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 5 –º–∞—Å—Ç–µ—Ä–æ–≤, 22 —É—Å–ª—É–≥–∏, –ø–æ—Å—Ç—ã –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è).
- [x] –°–∏–¥—ã –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã: `npm run seed` –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ. –ü–µ—Ä–µ–¥ –∫–∞—Ç–∞–ª–æ–≥–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∏–¥–∞ (users, services, bookings, –ø–æ—Å—Ç—ã –∏ —Ç.–¥.), –∑–∞—Ç–µ–º `seed-catalog` –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —à–∞–±–ª–æ–Ω—ã, –∑–∞—Ç–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π seed –∑–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ.

### –≠—Ç–∞–ø 3: –ë—ç–∫–µ–Ω–¥ API
- [x] –£–¥–∞–ª–µ–Ω–∞ –≤—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å `categories.level = 2` –≤ tree/–æ—Ç–≤–µ—Ç–∞—Ö
- [x] `GET /categories/tree` –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `children` –¥–ª—è level 1
- [x] –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å `service-templates`:
  - [x] `GET /categories/:id/templates` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - [x] `GET /service-templates/:slug` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –ø–æ slug
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –º–æ–¥—É–ª—å `services`:
  - [x] –í–∞–ª–∏–¥–∞—Ü–∏—è: `category_id` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å level 1
  - [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `service_template_id`
  - [x] –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π –∏–∑ —à–∞–±–ª–æ–Ω–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –º–æ–¥—É–ª—å `search`:
  - [x] –ü–æ–∏—Å–∫ –ø–æ `service_templates` (–æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å Meilisearch)
  - [x] –ü–æ–∏—Å–∫ –ø–æ `services`, –æ—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –º–æ–¥—É–ª—å `masters`:
  - [x] –í–∞–ª–∏–¥–∞—Ü–∏—è: `category_ids` –∏ `subcategory_ids` —Ç–æ–ª—å–∫–æ level 0 –∏ level 1 –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è (updateStep1)
  - [x] –î–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞: —á–µ—Ä–µ–∑ `GET /categories/:id/templates` –ø–æ –µ–≥–æ `category_ids` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –º–æ–¥—É–ª—å `posts`:
  - [x] –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞: –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö `category_ids` ‚Äî –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ level 0/1; –∏–Ω–∞—á–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –º–∞—Å—Ç–µ—Ä–∞

### –≠—Ç–∞–ø 4: –§—Ä–æ–Ω—Ç–µ–Ω–¥
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:
  - [x] `ServiceTemplateModel` (–Ω–æ–≤—ã–π)
  - [x] `ServiceModel` —Å `serviceTemplateId`
  - [x] `CategoryTreeModel` (children –¥–ª—è level 1 –ø—É—Å—Ç—ã–µ)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –∫–∞—Ç–∞–ª–æ–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
  - [x] –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ level 0 –∏ level 1
  - [x] –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ level 1 –∑–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã —á–µ—Ä–µ–∑ API
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—Å–ª—É–≥–∏ (wizard Step2/Step3):
  - [x] –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
  - [x] –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π
  - [x] –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é —É—Å–ª—É–≥—É (–±–µ–∑ —à–∞–±–ª–æ–Ω–∞)
- [x] –≠–∫—Ä–∞–Ω –º–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω—É (`/search/template/:slug`), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ slug –≤ URL
- [x] –ü–æ–∏—Å–∫ –ø–æ —à–∞–±–ª–æ–Ω–∞–º: —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /search/templates` (q, category_id, page, limit); –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ UI ‚Äî –ø–æ –∂–µ–ª–∞–Ω–∏—é.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] E2E: –æ–±–Ω–æ–≤–ª—ë–Ω `bookings.e2e-spec.ts` (–∫–∞—Ç–µ–≥–æ—Ä–∏—è level 1 –¥–ª—è —É—Å–ª—É–≥–∏), –¥–æ–±–∞–≤–ª–µ–Ω—ã `search.e2e-spec.ts` –∏ `categories.e2e-spec.ts`.
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–∏—Å–∫ –ø–æ —à–∞–±–ª–æ–Ω–∞–º (GET /search/templates –≤ e2e).
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ —Å —à–∞–±–ª–æ–Ω–æ–º (—Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞).
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π —É—Å–ª—É–≥–∏ (—Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞).
- [x] E2E: –∫–∞—Ç–∞–ª–æ–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (GET /categories/tree, GET /categories/:id/templates).

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–≤—ã—è–≤–ª–µ–Ω—ã –ø—Ä–∏ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ)

- [x] **–ë–∞–≥:** –ü—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö credentials –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω feed –≤–º–µ—Å—Ç–æ –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—Ö–æ–¥–∞.
  - **–ü—Ä–∏—á–∏–Ω–∞:** `auth_provider.dart` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AsyncValue.guard()`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ; `login_screen.dart` –¥–µ–ª–∞–µ—Ç `await login()` –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ.
  - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç—å `login()` –∏ `register()` –≤ `auth_provider.dart` —á—Ç–æ–±—ã –±—Ä–æ—Å–∞–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ, –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `state.hasError` –≤ —ç–∫—Ä–∞–Ω–∞—Ö –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
  - **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** –ò–∑–º–µ–Ω–µ–Ω—ã –º–µ—Ç–æ–¥—ã `login()` –∏ `register()` –≤ `auth_provider.dart` - —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `try/catch` —Å `rethrow`, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–ª–∏—Å—å –≤ —ç–∫—Ä–∞–Ω—ã –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –≥–¥–µ —É–∂–µ –µ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `catch (e)` –∏ –ø–æ–∫–∞–∑ `SnackBar`.
- [x] **–ü–∞—Ä–æ–ª–∏ –≤ —Å–∏–¥–∞—Ö:** –§—Ä–æ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–æ–ª—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã. –í —Å–∏–¥–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `test123` (–ø–æ–¥—Ö–æ–¥–∏—Ç) –∏ `Password123!` (–ø–æ–¥—Ö–æ–¥–∏—Ç), –Ω–æ –Ω—É–∂–Ω–æ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ.
  - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `qwerty123` –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏–¥–∞—Ö (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ñ—Ä–æ–Ω—Ç–∞ –∏ —É–¥–æ–±–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).
  - **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã `seed.ts` –∏ `test-data.seed.ts`, –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `qwerty123`. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `SEEDING.md`.

---

## –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ

**–°—Ç–∞—Ç—É—Å:** —Å–∏–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –±—ç–∫–µ–Ω–¥ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

- –ú–∏–≥—Ä–∞—Ü–∏—è `CreateServiceTemplates` –≤ —Ç–µ–∫—É—â–µ–π –ë–î —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (—Ç–∞–±–ª–∏—Ü—ã `service_templates`, `service_template_translations`, –∫–æ–ª–æ–Ω–∫–∞ `services.service_template_id`).
- –í—ã–ø–æ–ª–Ω–µ–Ω—ã —Å–∏–¥—ã:
  - `npm run seed:catalog` ‚Äî 10 –∫–∞—Ç–µ–≥–æ—Ä–∏–π L0, 53 L1, 340 —à–∞–±–ª–æ–Ω–æ–≤ —É—Å–ª—É–≥.
  - `npm run seed` ‚Äî 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (5 –º–∞—Å—Ç–µ—Ä–æ–≤), 5 –ø—Ä–æ—Ñ–∏–ª–µ–π –º–∞—Å—Ç–µ—Ä–æ–≤, 22 —É—Å–ª—É–≥–∏ (—Å `service_template_id`), –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –æ—Ç–∑—ã–≤—ã, –ø–æ—Å—Ç—ã, —Å–≤—è–∑–∏ post-services.
- –í `categories` —Ç–æ–ª—å–∫–æ level 0 –∏ 1; —à–∞–±–ª–æ–Ω—ã –≤ `service_templates`.

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é

1. **–ö–∞—Ç–∞–ª–æ–≥**
   - –û—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑–¥–µ–ª –ø–æ–∏—Å–∫–∞/–∫–∞—Ç–∞–ª–æ–≥–∞.
   - –î–µ—Ä–µ–≤–æ: —Ç–æ–ª—å–∫–æ –¥–≤–∞ —É—Ä–æ–≤–Ω—è (L0 ‚Üí L1), –±–µ–∑ ¬´–¥–µ—Ç–µ–π¬ª —É L1.
   - –ö–ª–∏–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ L1 ‚Üí –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —à–∞–±–ª–æ–Ω—ã —É—Å–ª—É–≥ (—Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫/—Å—Å—ã–ª–æ–∫).

2. **–°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ (–º–∞—Å—Ç–µ—Ä)**
   - –í–æ–π—Ç–∏ –∫–∞–∫ –º–∞—Å—Ç–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä `master@test.com` / `qwerty123`).
   - –°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏: –≤—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ L1 ‚Üí –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è —à–∞–±–ª–æ–Ω—ã ‚Üí –≤—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ/–æ–ø–∏—Å–∞–Ω–∏–µ/–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å).
   - –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π —É—Å–ª—É–≥–∏: —Ç–∞ –∂–µ —Ñ–æ—Ä–º–∞ –±–µ–∑ –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞ ‚Äî –≤–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤—Ä—É—á–Ω—É—é, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ.

3. **–ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω—É**
   - –ö–∞—Ç–∞–ª–æ–≥ ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è L1 ‚Üí –≤—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ —É—Å–ª—É–≥–∏ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–ú–∞—Å—Ç–µ—Ä–∞ –ø–æ —ç—Ç–æ–π —É—Å–ª—É–≥–µ¬ª ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤, –æ–∫–∞–∑—ã–≤–∞—é—â–∏—Ö —Ç–∞–∫—É—é —É—Å–ª—É–≥—É.

### –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** `docker-compose up -d` (PostgreSQL, Redis, MinIO, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ Meilisearch).
- **–ë—ç–∫–µ–Ω–¥:** –∏–∑ `backend`: `npm run start:dev` (–ø–æ—Ä—Ç 3000; –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ç–∫–µ–Ω–¥–∞, –µ—Å–ª–∏ –æ–Ω –∑–∞–ø—É—â–µ–Ω: `docker stop service_backend`).
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** –∏–∑ `frontend`: `flutter run -d chrome` (–∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ).
- **–£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** —Å–º. [SEEDING.md](../../SEEDING.md) (–ø–∞—Ä–æ–ª—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: `test123`).

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–º–µ—Ç—å—Ç–µ –≤ —á–µ–∫–ª–∏—Å—Ç–µ: ¬´–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ —Å —à–∞–±–ª–æ–Ω–æ–º¬ª –∏ ¬´–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π —É—Å–ª—É–≥–∏¬ª ‚Üí [x].

---

## –î–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø—Ä–∏ –¥—Ä—É–≥–æ–π —Å—Ä–µ–¥–µ / —á–∏—Å—Ç–æ–π –ë–î)

- **–ß–∏—Å—Ç–∞—è –ë–î:** —Å–Ω–∞—á–∞–ª–∞ `cd backend && npm run migration:run`. –ï—Å–ª–∏ –≤ –ë–î —É–∂–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏–∑ —Å—Ç–∞—Ä—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π, –≤–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã; –º–∏–≥—Ä–∞—Ü–∏—è `CreateServiceTemplates` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö.
- **–°–∏–¥—ã:** –ø–æ [SEEDING.md](../../SEEDING.md): `npm run seed:catalog`, –∑–∞—Ç–µ–º `npm run seed`.
- **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–ø–æ –∂–µ–ª–∞–Ω–∏—é):** –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–¥—ã –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—à–∏–±–æ–∫ –Ω–µ—Ç; –∫–∞—Ç–∞–ª–æ–≥ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —à–∞–±–ª–æ–Ω–æ–≤ –≤ UI:** –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏–∑ `GET /search/templates` –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –ø–æ–∏—Å–∫–∞ ‚Äî –ø–æ –∂–µ–ª–∞–Ω–∏—é.

---

## –°–ø—Ä–∞–≤–∫–∞: –∫–æ–º–∞–Ω–¥—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥–æ–≤

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |
|----------|--------|
| –ú–∏–≥—Ä–∞—Ü–∏–∏ | `cd backend && npm run migration:run` |
| –ö–∞—Ç–∞–ª–æ–≥ (L0, L1, —à–∞–±–ª–æ–Ω—ã) | `npm run seed:catalog` |
| –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–¥ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —É—Å–ª—É–≥–∏, –ø–æ—Å—Ç—ã) | `npm run seed` |
| –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å (–º–∏–≥—Ä–∞—Ü–∏–∏ + seed + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) | `npm run db:reset:dev` |
