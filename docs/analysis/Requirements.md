# ТРЕБОВАНИЯ - Платформа Service

**Версия:** 1.0
**Дата:** Декабрь 2025

---

## 1. Функциональные требования

### 1.1 Аутентификация и авторизация

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-001 | Система должна поддерживать регистрацию по email | Must | Planned |
| FR-002 | Система должна поддерживать регистрацию по телефону | Must | Planned |
| FR-003 | Система должна поддерживать OAuth через Google | Must | Planned |
| FR-004 | Система должна поддерживать OAuth через Apple | Must | Planned |
| FR-005 | Система должна верифицировать email/телефон | Must | Planned |
| FR-006 | Система должна поддерживать восстановление пароля | Must | Planned |
| FR-007 | Система должна использовать JWT для аутентификации | Must | Planned |
| FR-008 | Токен доступа должен иметь срок жизни 1 час | Must | Planned |
| FR-009 | Refresh token должен иметь срок жизни 30 дней | Must | Planned |

### 1.2 Профили пользователей

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-010 | Пользователь может создать профиль клиента | Must | Planned |
| FR-011 | Пользователь может создать профиль мастера | Must | Planned |
| FR-012 | Один пользователь может иметь обе роли (клиент + мастер) | Must | Planned |
| FR-013 | Профиль мастера должен содержать портфолио (фото) | Must | Planned |
| FR-014 | Профиль мастера должен содержать видео до 15 секунд | Must | Planned |
| FR-015 | Профиль мастера должен содержать биографию | Must | Planned |
| FR-016 | Профиль мастера должен содержать базовую локацию | Must | Planned |
| FR-017 | Мастер может указать радиус выезда | Must | Planned |
| FR-018 | Мастер может указать доплату за выезд | Should | Planned |
| FR-019 | Профиль должен отображать рейтинг и количество отзывов | Must | Planned |

### 1.3 Каталог услуг

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-020 | Система должна содержать многоуровневый каталог услуг | Must | Planned |
| FR-021 | Каталог должен поддерживать локализацию на 5+ языков | Must | Planned |
| FR-022 | Мастер может создавать кастомные услуги | Should | Planned |
| FR-023 | Мастер может привязывать услуги к категориям каталога | Must | Planned |
| FR-024 | Пользователь может предлагать новые категории | Should | Planned |
| FR-025 | Каталог должен содержать минимум 10 основных категорий | Must | Planned |

### 1.4 Поиск и фильтрация

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-030 | Система должна поддерживать поиск по геолокации | Must | Planned |
| FR-031 | Поиск должен возвращать результаты за < 100ms | Must | Planned |
| FR-032 | Система должна поддерживать фильтрацию по категории | Must | Planned |
| FR-033 | Система должна поддерживать фильтрацию по цене | Must | Planned |
| FR-034 | Система должна поддерживать фильтрацию по рейтингу | Must | Planned |
| FR-035 | Система должна поддерживать фильтр "только с выездом" | Should | Planned |
| FR-036 | Система должна поддерживать фильтр "только верифицированные" | Should | Planned |
| FR-037 | Результаты можно сортировать по расстоянию | Must | Planned |
| FR-038 | Результаты можно сортировать по рейтингу | Must | Planned |
| FR-039 | Результаты можно сортировать по цене | Must | Planned |
| FR-040 | Система должна показывать мастеров на карте | Must | Planned |
| FR-041 | Поиск должен поддерживать автодополнение | Should | Planned |

### 1.5 Бронирование

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-050 | Мастер может настроить рабочие часы на каждый день недели | Must | Planned |
| FR-051 | Мастер может добавить исключения (выходные, отпуск) | Must | Planned |
| FR-052 | Система должна автоматически рассчитывать доступные слоты | Must | Planned |
| FR-053 | Клиент может создать запись на доступный слот | Must | Planned |
| FR-054 | Мастер должен подтвердить запись (ручное подтверждение) | Must | Planned |
| FR-055 | Запись имеет статусы: pending, confirmed, completed, cancelled, no_show | Must | Planned |
| FR-056 | Клиент может отменить запись | Must | Planned |
| FR-057 | Мастер может отменить запись | Must | Planned |
| FR-058 | Мастер может предложить перенос записи | Should | Planned |
| FR-059 | Мастер может отметить неявку клиента (no-show) | Should | Planned |
| FR-060 | Клиент может записаться повторно к тому же мастеру | Should | Planned |
| FR-061 | Мастер может интегрировать Google Calendar | Should | Planned |

### 1.6 Контент и лента

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-070 | Мастер может публиковать фото работ | Must | Planned |
| FR-071 | Мастер может публиковать видео до 15 секунд | Must | Planned |
| FR-072 | Пост может содержать подпись | Must | Planned |
| FR-073 | Пост может быть привязан к услуге | Should | Planned |
| FR-074 | Лента должна показывать рекомендованный контент | Must | Planned |
| FR-075 | Лента должна показывать контент подписок | Must | Planned |
| FR-076 | Лента должна показывать контент мастеров рядом | Must | Planned |
| FR-077 | Пользователь может лайкать посты | Must | Planned |
| FR-078 | Пользователь может комментировать посты | Should | Planned |
| FR-079 | Пользователь может подписаться на мастера | Must | Planned |
| FR-080 | Пользователь может поделиться постом/профилем | Should | Planned |

### 1.7 Коммуникации

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-090 | Клиент может написать мастеру в чат | Must | Planned |
| FR-091 | Чат должен поддерживать текстовые сообщения | Must | Planned |
| FR-092 | Чат должен поддерживать отправку фото | Must | Planned |
| FR-093 | Чат должен работать в реальном времени (WebSocket) | Must | Planned |
| FR-094 | Контакты пользователей скрыты до подтверждения записи | Must | Planned |
| FR-095 | Система должна отправлять push-уведомления | Must | Planned |
| FR-096 | Система должна отправлять напоминания о записи за 24 часа | Should | Planned |
| FR-097 | Система должна отправлять напоминания о записи за 1 час | Should | Planned |
| FR-098 | Пользователь может настроить уведомления | Must | Planned |

### 1.8 Отзывы и рейтинги

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-100 | Клиент может оставить отзыв о мастере после услуги | Must | Planned |
| FR-101 | Мастер может оставить отзыв о клиенте | Should | Planned |
| FR-102 | Отзыв содержит оценку от 1 до 5 | Must | Planned |
| FR-103 | Отзыв содержит текстовое описание | Must | Planned |
| FR-104 | Рейтинг рассчитывается как среднее всех оценок | Must | Planned |
| FR-105 | Отзывы мастера о клиенте видны только мастерам | Should | Planned |
| FR-106 | Мастер может добавить клиента в чёрный список | Should | Planned |

### 1.9 Премиум и монетизация

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-110 | Клиент может оформить премиум-подписку | Must | Planned |
| FR-111 | Премиум-клиент получает скидку 5% на услуги | Must | Planned |
| FR-112 | Премиум-клиент не видит рекламу | Should | Planned |
| FR-113 | Мастер может оформить премиум-подписку | Must | Planned |
| FR-114 | Премиум-мастер выше в результатах поиска | Must | Planned |
| FR-115 | Премиум-мастер выделен визуально | Must | Planned |
| FR-116 | Мастер может пройти KYC верификацию | Should | Planned |
| FR-117 | Верифицированный мастер получает галочку | Should | Planned |
| FR-118 | Пользователь может пригласить друга по реферальному коду | Must | Planned |
| FR-119 | За приглашение друга дается бонус | Must | Planned |

### 1.10 Админ-панель

| ID | Требование | Приоритет | Статус |
|----|------------|-----------|---------|
| FR-120 | Админ может просматривать дашборд с метриками | Must | Planned |
| FR-121 | Админ может модерировать контент | Must | Planned |
| FR-122 | Админ может блокировать пользователей | Must | Planned |
| FR-123 | Админ может управлять каталогом услуг | Must | Planned |
| FR-124 | Админ может отвечать в техподдержке | Should | Planned |

---

## 2. Нефункциональные требования

### 2.1 Производительность

| ID | Требование | Метрика | Приоритет |
|----|------------|---------|-----------|
| NFR-001 | API должен отвечать быстро | < 200ms (95 percentile) | Must |
| NFR-002 | Поиск должен быть очень быстрым | < 100ms | Must |
| NFR-003 | Загрузка ленты должна быть быстрой | < 300ms | Must |
| NFR-004 | Система должна поддерживать concurrent users | 1000+ (MVP) | Must |
| NFR-005 | Система должна обрабатывать requests | 100+ RPS | Must |
| NFR-006 | WebSocket latency | < 100ms | Must |

### 2.2 Масштабируемость

| ID | Требование | Приоритет |
|----|------------|-----------|
| NFR-010 | Архитектура должна поддерживать горизонтальное масштабирование | Must |
| NFR-011 | База данных должна поддерживать репликацию | Should |
| NFR-012 | Статика должна обслуживаться через CDN | Should |
| NFR-013 | Система должна использовать кэширование | Must |

### 2.3 Безопасность

| ID | Требование | Приоритет |
|----|------------|-----------|
| NFR-020 | Все API должны работать по HTTPS | Must |
| NFR-021 | Пароли должны хэшироваться с помощью bcrypt | Must |
| NFR-022 | Должна быть защита от SQL injection | Must |
| NFR-023 | Должна быть защита от XSS атак | Must |
| NFR-024 | Должен быть rate limiting | Must |
| NFR-025 | Персональные данные должны быть защищены | Must |
| NFR-026 | Система должна соответствовать GDPR | Must |
| NFR-027 | Контакты скрыты до подтверждения записи | Must |
| NFR-028 | Админы должны использовать 2FA | Should |

### 2.4 Доступность (Availability)

| ID | Требование | Метрика | Приоритет |
|----|------------|---------|-----------|
| NFR-030 | Uptime системы | 99% (MVP), 99.9% (Prod) | Must |
| NFR-031 | Резервное копирование | Ежедневно | Must |
| NFR-032 | Recovery Time Objective (RTO) | < 4 часов | Must |
| NFR-033 | Recovery Point Objective (RPO) | < 24 часов | Must |

### 2.5 Usability (Удобство использования)

| ID | Требование | Приоритет |
|----|------------|-----------|
| NFR-040 | Интерфейс должен быть интуитивным | Must |
| NFR-041 | Навигация должна быть простой | Must |
| NFR-042 | Ключевые действия должны выполняться за 3 клика или меньше | Must |
| NFR-043 | Должна быть поддержка темной темы | Should |
| NFR-044 | Должна быть поддержка accessibility (a11y) | Should |

### 2.6 Локализация

| ID | Требование | Приоритет |
|----|------------|-----------|
| NFR-050 | Интерфейс должен поддерживать 5+ языков | Must |
| NFR-051 | Должно быть автоопределение языка | Must |
| NFR-052 | Пользователь должен иметь возможность ручного выбора языка | Must |
| NFR-053 | Каталог услуг должен быть локализован | Must |
| NFR-054 | Поддержка RTL языков (арабский, иврит) | Could |

### 2.7 Совместимость

| ID | Требование | Приоритет |
|----|------------|-----------|
| NFR-060 | iOS версия 13+ | Must |
| NFR-061 | Android версия 8+ | Must |
| NFR-062 | Chrome 90+ | Must |
| NFR-063 | Safari 14+ | Must |
| NFR-064 | Firefox 88+ | Must |
| NFR-065 | Edge 90+ | Must |

### 2.8 Maintainability (Поддерживаемость)

| ID | Требование | Приоритет |
|----|------------|-----------|
| NFR-070 | Код должен быть покрыт тестами | > 70% | Must |
| NFR-071 | Код должен соответствовать стандартам | Must |
| NFR-072 | Должна быть документация API | Must |
| NFR-073 | Должна быть документация архитектуры | Must |
| NFR-074 | Должны быть логи для отладки | Must |
| NFR-075 | Должен быть мониторинг системы | Should |

---

## 3. Ограничения

### 3.1 Технические ограничения

| ID | Ограничение | Описание |
|----|-------------|----------|
| CON-001 | Размер видео | Максимум 15 секунд |
| CON-002 | Размер файла фото | Максимум 10 MB |
| CON-003 | Размер файла видео | Максимум 50 MB |
| CON-004 | Количество фото в посте | Максимум 10 |
| CON-005 | Длина биографии | Максимум 500 символов |
| CON-006 | Длина отзыва | Максимум 1000 символов |
| CON-007 | Rate limit API | 100 req/min |

### 3.2 Бизнес-ограничения

| ID | Ограничение | Описание |
|----|-------------|----------|
| CON-010 | Минимальный возраст | 18 лет |
| CON-011 | Одна роль мастера на аккаунт | Один профиль мастера на пользователя |
| CON-012 | Отмена записи | Возможна за 24 часа до начала |

---

## 4. Acceptance Criteria (Критерии приёмки)

### MVP Launch Criteria

**Функциональность:**
- ✅ Все Must-have функциональные требования реализованы
- ✅ 70 user stories выполнены
- ✅ Основные user flows работают без ошибок

**Производительность:**
- ✅ API < 200ms (95 percentile)
- ✅ Поиск < 100ms
- ✅ Система выдерживает 1000 concurrent users

**Качество:**
- ✅ < 10 известных багов
- ✅ 0 критических багов
- ✅ Code coverage > 70%

**Безопасность:**
- ✅ HTTPS везде
- ✅ Защита от основных уязвимостей
- ✅ Rate limiting работает

**UX:**
- ✅ Интуитивный интерфейс
- ✅ Работает на iOS, Android, Web
- ✅ Адаптивный дизайн

---

## Связанные документы

- [BRD](../business/BRD.md) - Бизнес-требования
- [User Stories](../business/UserStories.md) - Пользовательские истории
- [Technical Specification](../technical/TechSpec.md) - Техническое задание
- [Roadmap](./Roadmap.md) - Дорожная карта

---

**Статус:** Утверждено
**Последнее обновление:** Декабрь 2025
